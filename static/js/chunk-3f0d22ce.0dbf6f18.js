(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f0d22ce"],{"0bb0":function(e,t,a){"use strict";var s=a("46a9"),n=a.n(s);n.a},4127:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"confirm-address-wrap"},[a("nav-bar"),a("section",{staticClass:"content-wrap list"},[a("van-form",{ref:"form",staticClass:"address-info",attrs:{"validate-first":""},on:{submit:e.onSubmit}},[a("van-field",{staticClass:"cell-custom-item",attrs:{label:"收货人",placeholder:"请填写收货人姓名",rules:[{required:!0}],center:"",clearable:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("van-field",{staticClass:"cell-custom-item",attrs:{label:"手机号",placeholder:"请填写收货人手机号",type:"tel",name:"tel",rules:[{required:!0,pattern:/1[3-9]\d{9}$/,message:"请正确输入手机号"}],center:"",clearable:""},model:{value:e.tel,callback:function(t){e.tel=t},expression:"tel"}}),a("van-field",{staticClass:"cell-custom-item",attrs:{label:"所在地区",placeholder:"省市区县、乡镇等",readonly:"","is-link":"",center:""},on:{click:e.onShowPopup},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}}),a("van-field",{staticClass:"cell-custom-item",attrs:{label:"详细地址",placeholder:"街道、楼牌号等",rules:[{required:!0}],center:"",clearable:""},model:{value:e.desc,callback:function(t){e.desc=t},expression:"desc"}}),a("div",{staticClass:"btns-wrap"},[a("van-button",{staticClass:"submit-btn",attrs:{type:"primary",size:"large"}},[e._v("确认提货")])],1)],1),a("van-popup",{style:{height:"70%"},attrs:{"lock-scroll":"","safe-area-inset-bottom":"",round:"",position:"bottom","close-icon-position":"top-right",closeable:""},on:{opened:e.opendAfter},model:{value:e.showPopup,callback:function(t){e.showPopup=t},expression:"showPopup"}},[a("choose-address",{ref:"addressCmp",attrs:{selectArea:e.addressList},on:{chooseAddressAfter:e.chooseAddressAfter}})],1)],1)],1)},n=[],i=(a("fe59"),a("053b"),a("08ba"),a("5748")),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"choose-address-wrap"},[a("p",{staticClass:"title"},[e._v("选择地区")]),a("div",{staticClass:"content"},[a("div",{staticClass:"nav-wrap"},[a("ul",{staticClass:"navbar"},e._l(e.navList,(function(t,s){return a("li",{key:s,staticClass:"nav-item",class:{active:e.setNavActive(t,s)},on:{click:function(a){return e.onClickNav(t)}}},[e._v(e._s(t.name))])})),0)]),a("div",{staticClass:"inner-wrap"},[a("p",{staticClass:"inner-title"},[e._v(e._s(e.tipChoose))]),a("div",{ref:"areaWrap",staticClass:"inner-content"},e._l(e.areaList,(function(t){return a("van-cell",{key:t.id,class:{"choose-cell":t.checked},attrs:{title:t.name,border:!1,center:"","data-id":t.id},on:{click:function(a){return e.choose(a,t)}},scopedSlots:e._u([t.checked?{key:"right-icon",fn:function(){return[a("van-icon",{staticClass:"active-icon",attrs:{name:"success"}})]},proxy:!0}:null],null,!0)})})),1)])])])},o=[],c=(a("2eeb"),a("ea69"),{name:"ChooseAddress",props:{selectArea:Array},data:function(){return{tipChoose:"请选择省/市",areaList:[],lastAreaList:[],navList:[],curNavItem:{}}},created:function(){var e=this;e.placeHolderTip={id:9999,name:"请选择"},e.navList.push(e.placeHolderTip)},methods:{init:function(){var e=this,t=Object(i["a"])(e.selectArea);t.length&&e.lastAreaList.length?(e.navList=t,e.areaList=Object(i["a"])(e.lastAreaList),e.curNavItem=t[t.length-1],e.$nextTick((function(){return e.scrollView(!1)}))):t.length?(e.navList=t,e.curNavItem=t[t.length-1],e.getChildArea(t[t.length-2],(function(){return e.scrollView(!1)}))):e.getProvince()},getProvince:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this;t.$http.get("/area/getProvinceList").then((function(a){t.areaList=t.setCustData(a.data)||[],t.$nextTick((function(t){"function"==typeof e&&e()}))}))},getChildArea:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=this,s={pid:e.id};a.$http.get("/area/getProvinceList",{params:s}).then((function(e){a.areaList=a.setCustData(e.data)||[],a.$nextTick((function(){"function"==typeof t&&t()}))}))},onClickNav:function(e){var t=this;e.id==t.placeHolderTip.id||e.leaf||(t.curNavItem=e,1==e["level"]?t.getProvince(t.scrollView):t.getChildArea(e,t.scrollView))},choose:function(e,t){var a=this;a.setCustData(a.areaList,t),a.setNavList(t),t.leaf?(a.lastAreaList=a.areaList,a.$emit("chooseAddressAfter",a.navList)):a.getChildArea(t)},setNavList:function(e){var t=this,a=t.navList.length-1,s=t.getIdxByCompareLvl(e);s>-1?t.navList.splice(s,1,e):(t.navList.splice(a,0,e),e.leaf&&t.navList.pop())},getIdxByCompareLvl:function(e){for(var t,a=this,s=-1,n=0;t=a.navList[n];n++)if(t.level==e.level){s=n;break}return s},setCustData:function(e,t){return e.map((function(e){return e["checked"]=!1,t&&e.id==t.id&&(e["checked"]=!0),e}))},setNavActive:function(e,t){var a=this,s=a.navList.length,n=a.navList[s-1],i=a.placeHolderTip.id,r=n.id==i&&t==s-2,o=n.id!=i&&t==s-1;return!!r||!!o},scrollView:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this,a=t.$refs.areaWrap.children,s=t.curNavItem,n=null;t.setCustData(t.areaList,s);var i=t.getIdxByCompareLvl(s);t.navList.splice(i+1,10),e&&t.navList.push(t.placeHolderTip);for(var r,o=0;r=a[o];o++){var c=r.getAttribute("data-id")||"";if(c==s.id){n=r;break}}n&&n.scrollIntoViewIfNeeded(!0)}}}),l=c,d=(a("0bb0"),a("9ca4")),u=Object(d["a"])(l,r,o,!1,null,"6cef3ae8",null),p=u.exports,v={name:"ConfirmAddress",data:function(){return{queryParams:{},goodsParams:{},details:{},showPopup:!1,addressList:[],name:"",tel:"",address:"",desc:"",checked:!1}},components:{ChooseAddress:p},created:function(){var e=this;e.init()},methods:{init:function(){var e=this;e.queryParams=e.$route.query;try{e.goodsParams=JSON.parse(e.queryParams.p).goods_num}catch(t){console.warn("JSON parse params error")}},onSubmit:function(){var e=this,t=(e.addressList,{uid:e.queryParams.uid,goods_nums:e.goodsParams,user_name:e.name,mobile:e.tel,address:e.address+e.desc});e.$http.post("/order/createOrder",{data:t}).then((function(t){e.$toast({type:"success",message:t.msg,onClose:function(){e.$router.push({path:"/pickUp/cardList"})}})})).catch((function(t){e.$dialog.alert({title:"系统提示",message:t.msg})}))},onShowPopup:function(){var e=this;e.showPopup=!e.showPopup},opendAfter:function(){var e=this,t=e.$refs.addressCmp;t.init()},chooseAddressAfter:function(e){var t=this;t.showPopup=!t.showPopup,t.addressList=Object(i["a"])(e),t.address="",t.addressList.forEach((function(e){return t.address+=" "+e.name}))}}},f=v,h=(a("7fb1"),Object(d["a"])(f,s,n,!1,null,"cfa86fb6",null));t["default"]=h.exports},"46a9":function(e,t,a){},"7fb1":function(e,t,a){"use strict";var s=a("99c5"),n=a.n(s);n.a},"99c5":function(e,t,a){}}]);